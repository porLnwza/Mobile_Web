<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡πâ‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ Dekkapo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f7f6;
            font-family: 'Arial', sans-serif;
        }
        .card-custom {
            border-radius: 15px;
        }
        .btn-custom-search, .btn-custom-add {
            background-color: #1e90ff; 
            color: white; 
            border: none; 
            padding: 0.375rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .btn-custom-search:hover, .btn-custom-add:hover {
            background-color: #0056b3;
        }
        .navbar {
            background-color: #007bff;
        }
        .navbar-brand {
            font-size: 1.5rem;
        }
        .navbar-nav .nav-link {
            color: white;
            font-weight: bold;
        }
        .navbar-nav .nav-link:hover {
            color: #ffcc00;
        }
        .card-header {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: #f8f9fa;
        }
        .table-hover tbody tr:hover {
            background-color: #d1ecf1;
        }
    </style>
</head>
<body>

<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
<form action="{{ url_for('home') }}" method="POST">
    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ö‡∏≤‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å -->
    <nav class="navbar navbar-expand-lg navbar-light mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">üì±‡∏£‡πâ‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ Dekkapo</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="customer_name">Name Customer</a></li>
                    <li class="nav-item"><a class="nav-link" href="mobile_version">Mobile version</a></li>
                    <li class="nav-item"><a class="nav-link" href="stock">Stock</a></li>
                    <li class="nav-item"><a class="nav-link" href="stockgrp">Stockgrp</a></li>
                    <li class="nav-item"><a class="nav-link" href="sale">Sale</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
    <div class="container">
        <div class="card mb-4 card-custom p-4">
            <div class="card-header">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div>
            <div class="card-body">
                <select name="customer_real_name" class="form-select mb-3" required>
                    <option>---‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤---</option>
                    {% for row in data_Customer %}
                    <option value="{{ row[0] }}" {% if selected_customer == row[0] %} selected {% endif %}>
                        {{ row[3] if row[2] else '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤' }}
                    </option>
                    {% endfor %}
                </select>   
                <select name="selected_phone" class="form-select mb-3">
                    <option>---‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå---</option>
                    {% for row in data_Customer %}
                        <option value="{{ row[5] }}" {% if selected_phone == row[5] %} selected {% endif %}>
                            {{ row[5] if row[5] else '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå' }}
                        </option>
                    {% endfor %}
                </select>
                <select name="customer_group" class="form-select mb-3">
                    <option>---‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤---</option>
                    {% for row in data_Customer_grp %}
                        <option value="{{ row[1] }}" {% if customer_group == row[0] %} selected {% endif %}>
                            {{ row[1] }}
                        </option>
                    {% endfor %}
                </select>

                <div class="d-flex justify-content-center">
                    <button type="submit" name="button_search" class="btn btn-custom-search">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>     
                </div>
            </div>
        </div>
    </div>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <div class="container">
        <div class="card mb-4 card-custom p-4">
            <div class="card-header">üì± ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</div>
            <div class="card-body">
                <select name="select_stock" class="form-select mb-3">
                    <option>---‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô---</option>
                    {% for row in data_stock[:14] %}
                    <option value="{{ row[4] }}" {% if select_stock == row[4] %} selected {% endif %}>
                        {{ row[4] }}
                    </option>
                    {% endfor %}
                </select>
                <select class="form-select mb-3" name="network">
                    <option>---‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢---</option>
                    <option>AIS</option>
                    <option>DTAC</option>
                    <option>TrueMoveH</option>
                </select>
            </div>
        </div>
    </div>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á -->
    <div class="container">
        <div class="card mb-4 card-custom p-4">
            <div class="card-header">üì± ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</div>
            <div class="card-body">
                <select class="form-select mb-3" name="quantity">
                    <option>---‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á---</option>
                    <option>1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                    <option>2 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                    <option>3 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                    <option>4 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                    <option>5 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                    <option>6 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                </select>
                <button class="btn btn-custom-add" type="submit" name="button_add">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
            </div>
        </div>
    </div>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ -->
    <div class="container">
        <div class="card mb-4 card-custom p-4">
            <div class="card-header">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</div>
            <div class="card-body">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</th>
                            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                            <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in all_orders %}
                        <tr>
                            <td>{{ order.OrderName }}</td>  <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                            <td>{{ order.OrderMobileName }}</td>
                            <td>{{ order.OrderMobileGrp }}</td>
                            <td>{{ order.OrderPeople }}</td>
                            <td>{{ order.OrderNameMobile }}</td>
                            <td>{{ order.Orderphone }}</td>
                            <td>
                                <button type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#editModal{{ order.OrderID }}">
                                    <i class="fas fa-edit"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <form action="{{ url_for('cancel_product') }}" method="POST" class="d-inline">
                                    <input type="hidden" name="product_name" value="{{ order.OrderName }}">
                                    <button type="submit" class="btn btn-danger btn-sm" name="button_cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤  </button>
                                </form>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="7">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                
            </div>
        </div>
    </div>
    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ -->    
                    <div class="d-flex justify-content-center">
                        <div class="mb-3 me-2" style="flex-grow: 1;">
                            <input type="text" class="form-control" id="search_order" name="search_order" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" value="{{ search_order }}">
                        </div>
                        <button type="submit" name="button_search_order" class="btn btn-custom-search">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                    </div>
 </table>
</form>

<!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
{% for order in all_orders %}
<div class="modal fade" id="editModal{{ order.OrderID }}" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="{{ url_for('edit_product') }}" method="POST">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
                    <input type="hidden" name="product_name" value="{{ order.OrderName }}">
                    <div class="mb-3">
                        <label for="edit_customerName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                        <select name="edit_customerName" class="form-select" required>
                            {% for row in data_Customer %}
                            <option value="{{ row[0] }}" {% if selected_customer == row[0] %} selected {% endif %}>
                                {{ row[3] if row[2] else '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤' }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit_model" class="form-label">‡∏£‡∏∏‡πà‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <select name="edit_model" class="form-select" required>
                            {% for row in data_stock %}
                            <option value="{{ row[4] }}" {% if select_stock == row[4] %} selected {% endif %}>
                                {{ row[4] }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit_customergrp" class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                        <select name="edit_customergrp" class="form-select" required>
                            {% for row in data_Customer_grp %}
                        <option value="{{ row[1] }}" {% if customer_group == row[0] %} selected {% endif %}>
                            {{ row[1] }}
                        </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit_phone" class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                        <select name="edit_phone" class="form-select" required>
                            {% for row in data_Customer %}
                                <option value="{{ row[5] }}" {% if selected_phone == row[5] %} selected {% endif %}>
                                    {{ row[5] if row[5] else '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå' }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit_network" class="form-label">‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</label>
                        <select name="edit_network" class="form-select" required>
                            <option value="DTAC" {% if order.network == 'DTAC' %} selected {% endif %}>DTAC</option>
                            <option value="AIS" {% if order.network == 'AIS' %} selected {% endif %}>AIS</option>
                            <option value="True" {% if order.network == 'True' %} selected {% endif %}>True</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit_quantity" class="form-label">‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</label>
                        <select name="edit_quantity" class="form-select" required>
                            <option value="1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="2 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '2 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>2 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="3 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '3 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>3 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="4 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '4 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>4 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="5 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '5 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>5 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="6 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" {% if order.quantity == '6 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' %} selected {% endif %}>6 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏õ‡∏¥‡∏î</button>
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}
{% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="alert alert-{{ messages[0][0] }}">
                            {{ messages[0][1] }}
                        </div>
                    {% endif %}
                {% endwith %}
                <table>
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
